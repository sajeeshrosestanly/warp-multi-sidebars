# Run locally: npx @redocly/spot run ./apis/arazzo.yaml --input token=abc123
arazzo: 1.0.0
info:
  title: Finzly Connect Sample Workflow
  version: 0.1.0
sourceDescriptions:
  - name: api-reference
    type: openapi
    url: index.yaml
    x-serverUrl: "https://sandbox.api.finzly.io"
workflows:
  - workflowId: onboardingAndFirstPayment
    summary: Create customer and submit first payment
    description: |
      Demonstrates a basic sandbox flow for onboarding a customer and submitting a payment.
    inputs:
      type: object
      properties:
        token:
          type: string
          description: JWT bearer token for sandbox access.
    parameters:
      - name: Authorization
        in: header
        value: "Bearer {$inputs.token}"
    steps:
      - stepId: createSampleCustomer
        operationId: api-reference.createCustomer
        description: Create a sample customer record.
        requestBody:
          payload:
            type: BUSINESS
            legalName: Acme Manufacturing LLC
            email: treasury@acme.example
            country: US
        outputs:
          customerId: $response.body#/id
      - stepId: createFirstPayment
        operationId: api-reference.createPayment
        description: Submit a sample payment for the customer.
        requestBody:
          payload:
            amount: 1250.75
            currency: USD
            rail: ACH
            beneficiaryId: ben_001
            remittanceInformation: Invoice 2026-0021
        outputs:
          paymentId: $response.body#/id
      - stepId: checkPaymentStatus
        operationId: api-reference.getPayment
        description: Retrieve payment status.
        parameters:
          - name: paymentId
            in: path
            value: $steps.createFirstPayment.outputs.paymentId
