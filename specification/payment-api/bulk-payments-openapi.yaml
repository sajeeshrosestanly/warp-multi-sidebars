openapi: 3.1.0
info:
  title: Bulk Payment API
  version: 2.6.6
servers:
  - url: https://sandbox-security-uat.finzly.io/auth/realms/BANKOS.UAT.SANDBOX.CUSTOMER/protocol/openid-connect/token
    description: Authentication
    variables:
      tenant:
        description: Tenant
        default: sandbox
security:
  - oAuth2:
      - roles
tags:
  - name: Bulk Payment
    description: >
      This feature allows customers to upload bulk payments and process them
      seamlessly. Following payment, rails are supported.
        1. ACH - NACHA format
        2. Wire
        3. RTP
        4. FedNow.
x-tagGroups:
  - name: Bulk Payment APIs
    tags:
      - Bulk Payment
paths:
  "/v1/payments/customers/{customerUID}/files/{fileType}":
    post:
      tags:
        - Bulk Payment
      summary: To upload the payment file.
      description: This feature allows customers to upload bulk payments and process
        them seamlessly. Following payment, rails are supported. 1. ACH - NACHA
        format 2. Wire 3. RTP 4. FedNow
      operationId: bulkUpload
      parameters:
        - name: customerUID
          in: path
          required: true
          style: simple
          explode: false
          schema:
            type: string
            description: Customer unique Id.
        - name: fileType
          in: path
          required: true
          style: simple
          explode: false
          schema:
            type: string
            description: File type. Possible values are csv/fedwire/rtp/ach.
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
              description: Only csv and txt files formates are allowed.
        required: true
      responses:
        "200":
          description: Successfully processed request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BulkPaymentResponse"
        "400":
          description: bad input parameter environment
        "401":
          description: You are not authorized to access the resource
        "403":
          description: Accessing the resource you were trying to reach is forbidden
        "404":
          description: The resource you were trying to reach is not found
        "405":
          description: bad input parameter environment
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Error"
        "503":
          description: Service unavailable
        default:
          description: bulk payment file
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BulkPaymentResponse"
  "/v1/files/{fileNumber}/payments":
    get:
      tags:
        - Bulk Payment
      summary: Get payments by file number
      description: Retrieve payments associated with a specific file. Supports
        pagination with default values of page=1 and limit=10.
      operationId: getFilePayments
      parameters:
        - name: fileNumber
          in: path
          required: true
          style: simple
          explode: false
          schema:
            type: string
            example: "9247"
        - name: page
          in: query
          required: false
          style: form
          explode: true
          schema:
            type: integer
            example: 1
            default: 1
        - name: limit
          in: query
          required: false
          style: form
          explode: true
          schema:
            type: integer
            example: 10
            default: 10
      responses:
        "200":
          description: Successfully retrieved file payments
          content:
            application/json:
              schema:
                type: object
                properties:
                  pagination:
                    type: object
                    properties:
                      pageReturned:
                        type: integer
                        example: 1
                      pageSize:
                        type: integer
                        example: 1000
                      returnedRecords:
                        type: integer
                        example: 1
                      totalRecords:
                        type: integer
                        example: 1000
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/FilePaymentResponse"
        "400":
          description: Bad request
        "401":
          description: You are not authorized to access the resource
        "403":
          description: Accessing the resource you were trying to reach is forbidden
        "404":
          description: The resource you were trying to reach is not found
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Error"
        "503":
          description: Service unavailable
components:
  schemas:
    BulkPaymentResponse:
      $ref: ./payments-openapi.yaml#/components/schemas/BulkPaymentResponse
    Error:
      $ref: ./payments-openapi.yaml#/components/schemas/Error
    FilePaymentResponse:
      $ref: ./payments-openapi.yaml#/components/schemas/FilePaymentResponse
  securitySchemes:
    oAuth2:
      $ref: ./payments-openapi.yaml#/components/securitySchemes/oAuth2
